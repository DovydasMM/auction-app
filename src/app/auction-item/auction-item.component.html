<div class="auction-item">
  <div class="auction-info">
    <p class="auction-name">
      {{
        auctionItem.auctionName ? auctionItem.auctionName : "Name was forgotten"
      }}
    </p>
    <p class="auction-description">
      {{
        auctionItem.auctionDescription
          ? auctionItem.auctionDescription
          : "Description was forgotten"
      }}
    </p>
    <div *ngIf="auctionItem.status == 'active'" class="auction-bidTimer">
      <p *ngIf="timer != 0">
        {{ timer * 1000 | date : "mm:ss" }}
      </p>

      <button
        (click)="bidAuction()"
        *ngIf="auctionUser.userName != auctionItem.auctionOwner"
      >
        Bid
      </button>
      <p *ngIf="auctionItem.status == 'inactive'">Inactive</p>
      <p>{{ auctionItem.highestBid }}€</p>
    </div>

    <p *ngIf="auctionItem.status == 'ended'">Auction has ended</p>
    <!-- <p *ngIf="auctionItem.auctionOwner == auctionUser.userName">Your item</p> -->
    <button
      *ngIf="
        auctionUser.userName == auctionItem.auctionOwner &&
        auctionItem.status == 'inactive'
      "
      (click)="startAuction()"
    >
      Start auction
    </button>

    <div (click)="showInfo()">
      <fa-icon [icon]="showAuctionInfo ? arrowUp : arrowDown"></fa-icon>
    </div>
  </div>

  <div *ngIf="showAuctionInfo">
    <div
      *ngIf="showAuctionInfo && auctionItem.status == 'active'"
      class="auction-status-info"
    >
      <p *ngFor="let bid of auctionHistory; index as i">
        {{ i + 1 }}. {{ bid.bidder }} {{ bid.bidSum }}€
      </p>
    </div>
    <div
      *ngIf="showAuctionInfo && auctionItem.status == 'ended'"
      class="auction-status-info"
    >
      <div *ngIf="auctionItem.highestBidder">
        <p>Auction winner: {{ auctionItem.highestBidder }}</p>
        <p>Winning price: {{ auctionItem.highestBid }}€</p>
      </div>
      <div *ngIf="!auctionItem.highestBidder">
        <p>No one bid for this item</p>
      </div>
    </div>
  </div>
</div>
